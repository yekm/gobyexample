<!DOCTYPE html>
<meta charset="utf-8">
<link rel="stylesheet" href="main.css">

<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(68262424, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/68262424" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/src/lang-go.js"></script>
<body>
    <center><a href=../>index</a></center>
<table>

<tr class=withcomment>
    
    <td class=comment rowspan=1>
         In the previous example we looked at [spawning external processes](spawning-processes). We do this when we need an external process accessible to a running Go process. Sometimes we just want to completely replace the current Go process with another (perhaps non-Go) one. To do this we&#39;ll use Go&#39;s implementation of the classic &lt;a href=&#34;http://en.wikipedia.org/wiki/Exec_(operating_system)&#34;&gt;&lt;code&gt;exec&lt;/code&gt;&lt;/a&gt; function.</td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=space>
    
    <td class=comment rowspan=2>
        </td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">package main</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=space>
    
    <td class=comment rowspan=6>
        </td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">import (</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	&#34;os&#34;</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	&#34;os/exec&#34;</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	&#34;syscall&#34;</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">)</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=space>
    
    <td class=comment rowspan=2>
        </td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">func main() {</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=space>
    
    <td class=comment rowspan=1>
        </td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=comment rowspan=4>
         For our example we&#39;ll exec `ls`. Go requires an absolute path to the binary we want to execute, so we&#39;ll use `exec.LookPath` to find it (probably `/bin/ls`).</td>
    <td class=code><pre class="prettyprint">	binary, lookErr := exec.LookPath(&#34;ls&#34;)</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	if lookErr != nil {</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">		panic(lookErr)</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	}</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=space>
    
    <td class=comment rowspan=1>
        </td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=comment rowspan=1>
         `Exec` requires arguments in slice form (as apposed to one big string). We&#39;ll give `ls` a few common arguments. Note that the first argument should be the program name.</td>
    <td class=code><pre class="prettyprint">	args := []string{&#34;ls&#34;, &#34;-a&#34;, &#34;-l&#34;, &#34;-h&#34;}</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=space>
    
    <td class=comment rowspan=1>
        </td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=comment rowspan=1>
         `Exec` also needs a set of [environment variables](environment-variables) to use. Here we just provide our current environment.</td>
    <td class=code><pre class="prettyprint">	env := os.Environ()</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=space>
    
    <td class=comment rowspan=1>
        </td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=comment rowspan=5>
         Here&#39;s the actual `syscall.Exec` call. If this call is successful, the execution of our process will end here and be replaced by the `/bin/ls -a -l -h` process. If there is an error we&#39;ll get a return value.</td>
    <td class=code><pre class="prettyprint">	execErr := syscall.Exec(binary, args, env)</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	if execErr != nil {</pre></td>
    <td class=output><pre class=preo>total 4.1M
drwxrwxr-x 8 travis travis 4.0K Oct 21 16:50 .
drwxrwxr-x 3 travis travis 4.0K Oct 21 16:45 ..
drwxrwxr-x 2 travis travis 4.0K Oct 21 16:52 examples
drwxrwxr-x 8 travis travis 4.0K Oct 21 16:45 .git
-rw-rw-r-- 1 travis travis   33 Oct 21 16:45 .gitignore
-rw-rw-r-- 1 travis travis 1.3K Oct 21 16:45 Makefile
-rwxrwxr-x 1 travis travis 4.1M Oct 21 16:46 maketable
-rw-rw-r-- 1 travis travis 1.8K Oct 21 16:45 README.md
drwxrwxr-x 2 travis travis 4.0K Oct 21 16:45 site
drwxr-xr-x 2 travis travis 4.0K Oct 21 16:50 subdir
drwxrwxr-x 3 travis travis 4.0K Oct 21 16:46 tmp
drwxrwxr-x 2 travis travis 4.0K Oct 21 16:45 tools
-rw-rw-r-- 1 travis travis  106 Oct 21 16:45 .travis.yml
</pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">		panic(execErr)</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	}</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">}</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

</table>
    <center><a href=../>index</a></center>
</body>
