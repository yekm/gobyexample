<!DOCTYPE html>
<meta charset="utf-8">
<link rel="stylesheet" href="main.css">

<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(68262424, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/68262424" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/src/lang-go.js"></script>
<body>
    <center><a href=../>index</a></center>
<table>

<tr class=withcomment>
    
    <td class=comment rowspan=1>
         Throughout program execution, we often want to create data that isn&#39;t needed after the program exits. *Temporary files and directories* are useful for this purpose since they don&#39;t pollute the file system over time.</td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=space>
    
    <td class=comment rowspan=2>
        </td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">package main</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=space>
    
    <td class=comment rowspan=7>
        </td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">import (</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	&#34;fmt&#34;</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	&#34;io/ioutil&#34;</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	&#34;os&#34;</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	&#34;path/filepath&#34;</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">)</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=space>
    
    <td class=comment rowspan=6>
        </td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">func check(e error) {</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	if e != nil {</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">		panic(e)</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	}</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">}</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=space>
    
    <td class=comment rowspan=2>
        </td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">func main() {</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=space>
    
    <td class=comment rowspan=1>
        </td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=comment rowspan=2>
         The easiest way to create a temporary file is by calling `ioutil.TempFile`. It creates a file *and* opens it for reading and writing. We provide `&#34;&#34;` as the first argument, so `ioutil.TempFile` will create the file in the default location for our OS.</td>
    <td class=code><pre class="prettyprint">	f, err := ioutil.TempFile(&#34;&#34;, &#34;sample&#34;)</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	check(err)</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=space>
    
    <td class=comment rowspan=1>
        </td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=comment rowspan=1>
         Display the name of the temporary file. On Unix-based OSes the directory will likely be `/tmp`. The file name starts with the prefix given as the second argument to `ioutil.TempFile` and the rest is chosen automatically to ensure that concurrent calls will always create different file names.</td>
    <td class=code><pre class="prettyprint">	fmt.Println(&#34;Temp file name:&#34;, f.Name())</pre></td>
    <td class=output><pre class=preo>Temp file name: /tmp/sample882786001
</pre></td>
</tr>

<tr class=space>
    
    <td class=comment rowspan=1>
        </td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=comment rowspan=1>
         Clean up the file after we&#39;re done. The OS is likely to clean up temporary files by itself after some time, but it&#39;s good practice to do this explicitly.</td>
    <td class=code><pre class="prettyprint">	defer os.Remove(f.Name())</pre></td>
    <td class=output><pre class=preo>Temp file name: /tmp/sample363271939
</pre></td>
</tr>

<tr class=space>
    
    <td class=comment rowspan=1>
        </td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=comment rowspan=2>
         We can write some data to the file.</td>
    <td class=code><pre class="prettyprint">	_, err = f.Write([]byte{1, 2, 3, 4})</pre></td>
    <td class=output><pre class=preo>Temp file name: /tmp/sample453381763
</pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	check(err)</pre></td>
    <td class=output><pre class=preo>Temp file name: /tmp/sample829496240
</pre></td>
</tr>

<tr class=space>
    
    <td class=comment rowspan=1>
        </td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=comment rowspan=3>
         If we intend to write many temporary files, we may prefer to create a temporary *directory*. `ioutil.TempDir`&#39;s arguments are the same as `TempFile`&#39;s, but it returns a directory *name* rather than an open file.</td>
    <td class=code><pre class="prettyprint">	dname, err := ioutil.TempDir(&#34;&#34;, &#34;sampledir&#34;)</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	check(err)</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	fmt.Println(&#34;Temp dir name:&#34;, dname)</pre></td>
    <td class=output><pre class=preo>Temp file name: /tmp/sample342032679
Temp dir name: /tmp/sampledir482562650
</pre></td>
</tr>

<tr class=space>
    
    <td class=comment rowspan=2>
        </td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	defer os.RemoveAll(dname)</pre></td>
    <td class=output><pre class=preo>Temp file name: /tmp/sample287732029
Temp dir name: /tmp/sampledir071331192
</pre></td>
</tr>

<tr class=space>
    
    <td class=comment rowspan=1>
        </td>
    <td class=code><pre class="prettyprint"></pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=comment rowspan=4>
         Now we can synthesize temporary file names by prefixing them with our temporary directory.</td>
    <td class=code><pre class="prettyprint">	fname := filepath.Join(dname, &#34;file1&#34;)</pre></td>
    <td class=output><pre class=preo></pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	err = ioutil.WriteFile(fname, []byte{1, 2}, 0666)</pre></td>
    <td class=output><pre class=preo>Temp file name: /tmp/sample596892995
Temp dir name: /tmp/sampledir426724806
</pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">	check(err)</pre></td>
    <td class=output><pre class=preo>Temp file name: /tmp/sample268478350
Temp dir name: /tmp/sampledir635324309
</pre></td>
</tr>

<tr class=codeline>
    
    <td class=code><pre class="prettyprint">}</pre></td>
    <td class=output><pre class=preo>Temp file name: /tmp/sample190893423
Temp dir name: /tmp/sampledir121832450
</pre></td>
</tr>

</table>
    <center><a href=../>index</a></center>
</body>
